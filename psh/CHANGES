CHANGES

------------------------------------------------------------
0.003-gw2 (Limited Release)
------------------------------------------------------------

Contributions from Glen Whitney:

Documentation:

  * Minor updates, for example noting that the executable
    strategy is now in by default.

Code:

  * version number changed to gw2

  * added $psh::debugging variable to hold the debugging
    state, so it can be turned on and off in a running psh

  * removed vestigal "ABSING" debug message that was used to
    figure out what was so slow on some systems (that's why
    fast_abs_path is used when available).

  * if you're sending a signal to a stopped job, wake it up
    first. (bash does this)

  * if you kill CONT a job, record the fact that you now
    think it's running

  * changed the interface for getting information about a
    job from a straight hash to a suite of functions
    (get_job_command, is_job_running, record_job_running) so
    that the is_job_running function can actually ask the
    job whether it's still running or has been stopped or
    terminated.

  * added a (still very rudimentary) readline builtin for
    interacting with the ReadLine implementation psh is
    using; my hope is for it eventually to be like the bash
    builtin "bind". I didn't want to call it bind, though,
    because perl has a built-in function bind.

  * remove initial whitespace in &psh::decompose (should
    have been that way all along).

  * changed handle_message so that it dies when an unknown
    error occurs in the top-level eval of main_loop in the
    main program. (Otherwise, if there's a bug in psh that
    prevents builtins from executing, you could end up stuck
    in psh with no way to exit. This happened while
    debugging.)

  * moved reap_children from iget() to process(), since
    non-interactive psh's shoud reap their children, too.

  * avoided trying to save history if there wasn't even a
    ReadLine module

  * replaced literal file handle HIST with a FileHandle (this
    was an old todo, right?)

  * added handle_wait_status function so that wait_for_system
    and is_job_running could receive from the waitpid status
    the information of whether the job finished, was
    terminated, or was stopped. This way psh won't be "fooled"
    if something else, like the window manager, stops one of
    its jobs. Similarly, psh won't be fooled if the job catches
    Control-C and doesn't actually terminate.

  * added option to wait_for_system to ask it not to print out
    a message for normal termination, used by my_system in the
    foreground.

  * removed $flag_signal_sent and $signal_sent, since the waits
    now get that info directly from waitpid.

  * replaced a busy wait loop in wait_for_system with a
    quiescent one (i.e., replaced WNOHANG with WUNTRACED). This
    means the actual perl process won't be doing anything until
    the child changes state, which should help the operating
    system out.

  * made reap_children check for processes that have 
    disappeared altogether. (In odd circumstances you could get
    entries on this list that would never go away.)

  * made restart_job use the highest-numbered job if no job is
    specified and there are no stopped jobs.


------------------------------------------------------------
0.003-gw1 (Limited Release)
------------------------------------------------------------

Contributions from Glen Whitney:

  *  psh::decompose function to handle word-splitting of the command line

  * psh::evl, the basic line evaluator split out as a single function so
    it can be called by the user

  * A flexible set of evaluation strategies that can be selected or
    reordered by setting a configuration variable

  * A $psh::echo variable to control whether perl results of evaluation
    are printed.

  * A new strategy which checks if the first word is a perl function, so
    that print can be Perl print, not /usr/bin/print, if you like.

  * Handled aliasing using %built_ins (0.003 does alias handling
    separately; this could be implemented via another evaluation strategy)

  * Updated the which builtin to show which strategy will apply to a given
    command line

  * Grab more input automatically if <<BLOCK appears anywhere on the line,
    or if the line ends with an open brace.

  * Control-C now abandons a partial line of input

  * results of psh::which searches are hashed.

  * a few other small items

  * Thorough documentation of every user-accessible variable and function


------------------------------------------------------------
0.003
------------------------------------------------------------

Contributions from Markus Peter:

  * Rudimentary background jobs handling and job management.

  * Signal handling.

  * Filename completion.

  * Updates to history handling.

  * Flexible %built_ins mechanism for adding built-in
    functions.

  * Smart mode is on by default.


------------------------------------------------------------
0.00205
------------------------------------------------------------

  * Changed prompting to pass prompt string into iget(),
    which passes it on to Term::ReadLine::readline or
    prints it out if the ReadLine module is not available.
    Thanks to Sam Tregar and "tmb at lumo.com".

  * Changed history handling so that empty lines and those
    consisting of entirely whitespace are not recorded.

  * Fixed a couple of typos.

  * Changed the regular expression for "smart mode" to
    allow "vi +3 psh" in addition to "ls -l".

  * Now uses Getopt::Std for option processing.

  * Fixed the code that detects the presence of
    Term::ReadLine.

  * Made more use of debug mode to print out advisory
    information.

  * Use zero instead of undef to set Term::ReadLine::MinLine
    so that we don't get undef usage trouble in the guts of
    Term::ReadLine::Gnu.


------------------------------------------------------------
0.00204
------------------------------------------------------------

  * Added a bunch of stuff to the TODO file.

  * Added parens around each part of the $interactive
    detection expression.

  * Prompt variables are now dealt with via %prompt_vars,
    which can be modified, so that custom prompt variables
    can be created.

  * Added %built_ins.


------------------------------------------------------------
0.00203
------------------------------------------------------------

  * Fixed typo that caused a bug where prompt variable "$"
    didn't work. Thanks to John Labovitz.


------------------------------------------------------------
0.00202
------------------------------------------------------------


------------------------------------------------------------
0.00201
------------------------------------------------------------


------------------------------------------------------------
0.002
------------------------------------------------------------


------------------------------------------------------------
0.001
------------------------------------------------------------

Initial release


